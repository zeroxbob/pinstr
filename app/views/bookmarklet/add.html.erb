<div id="form-container" data-controller="bookmarklet-add" class="bg-white rounded-lg shadow-sm p-6">
  <h1 class="text-2xl font-bold text-gray-800 mb-4">Save Bookmark to Pinstr</h1>

  <div id="nostr-status" class="bg-gray-100 px-4 py-3 rounded-lg border-l-4 border-gray-400 mb-4 text-sm text-gray-600 font-medium" data-bookmarklet-add-target="status">
    Checking for Nostr extension...
  </div>

  <div id="form-error" style="display: none;" class="bg-red-50 text-red-800 border border-red-200 px-3 py-2 rounded mb-4" data-bookmarklet-add-target="formError"></div>

  <%= form_with(model: @bookmark, url: create_from_bookmarklet_path, id: "bookmark-form", data: { "bookmarklet-add-target": "form", action: "submit->bookmarklet-add#handleSubmit" }) do |form| %>
    <% if @bookmark.errors.any? %>
      <div class="bg-red-50 text-red-800 border border-red-200 px-3 py-2 rounded mb-4">
        <h2 class="font-medium mb-2"><%= pluralize(@bookmark.errors.count, "error") %> prohibited this bookmark from being saved:</h2>
        <ul class="list-disc list-inside space-y-1">
          <% @bookmark.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div class="mb-4">
      <%= form.label :title, class: "block mb-2 font-medium text-gray-700" %>
      <%= form.text_field :title, required: true, id: "bookmark-title", class: "w-full px-3 py-2 border border-gray-300 rounded focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-colors", data: { "bookmarklet-add-target": "title" } %>
    </div>

    <div class="mb-4">
      <%= form.label :url, class: "block mb-2 font-medium text-gray-700" %>
      <%= form.text_field :url, required: true, id: "bookmark-url", class: "w-full px-3 py-2 border border-gray-300 rounded focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-colors", data: { "bookmarklet-add-target": "url" } %>
    </div>

    <div class="mb-4">
      <%= form.label :description, class: "block mb-2 font-medium text-gray-700" %>
      <%= form.text_area :description, id: "bookmark-description", class: "w-full px-3 py-2 border border-gray-300 rounded min-h-24 resize-y focus:border-indigo-500 focus:ring-2 focus:ring-indigo-100 transition-colors", data: { "bookmarklet-add-target": "description" } %>
    </div>

    <% if @in_popup %>
      <%= hidden_field_tag :popup, "true" %>
    <% end %>

    <div class="flex justify-between mt-6">
      <button type="button" class="bg-gray-200 text-gray-800 px-4 py-2 rounded hover:bg-gray-300 transition-colors" data-action="click->bookmarklet-add#cancelBookmark">Cancel</button>
      <%= form.submit "Save Bookmark", class: "bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition-colors", id: "submit-button", data: { "bookmarklet-add-target": "submitButton" } %>
    </div>
  <% end %>
  
  <div class="text-center text-gray-600 text-sm mt-4">
    <p>
      <strong>Note:</strong> If you have a Nostr extension installed (like nos2x or Alby), you'll be prompted to sign this bookmark.
      <a href="<%= debug_bookmarklet_path %>" target="_blank" class="text-indigo-600 hover:text-indigo-800 hover:underline">Nostr extension not working?</a>
    </p>
  </div>
</div>

<!-- No custom styles needed - everything uses Tailwind classes -->
